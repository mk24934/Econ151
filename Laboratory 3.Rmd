---
title: "Laboratory 3"
author: "Written by Mark McAvoy"
date: "Summer 2020"
knit: (function(inputFile, encoding) { 
      out_dir <- 'Knit files (Output)';
      rmarkdown::render(inputFile,
                    encoding=encoding, 
                    output_file=file.path(dirname(inputFile), out_dir, 'Laboratory 3.html')) })
output:
  revealjs::revealjs_presentation:
    theme: beige
    highlight: pygments
    center: true
    css: styles.css

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
# Clear enviroment before starting 
remove(list = ls())


# The following sets your working directory to wherever this .Rmd file is saved
# note, must be included in the setup portion of the .Rmd
knitr::opts_knit$set(root.dir = getwd())
library(kableExtra)
options(knitr.table.format = "html")
# Note: this only runs when knit, so if try running by hand it will not do anything, best to also change working directory manually
# alternatively, you may change working directory manually

# if(!require(revealjs)) install.packages("revealjs", repos = "http://cran.us.r-project.org") # for revealjs slides
# library(revealjs) 
if(!require(tidyverse)) install.packages("tidyverse", repos = "http://cran.us.r-project.org") # run this the first time (only need to once), note moved tidyverse to after AER package, as it was creating some issues running AER after tidyverse
  library(tidyverse) # includes ggplot2 and many more useful libraries
library(reshape2)
# if(!require(knitr)) install.packages("knitr", repos = "http://cran.us.r-project.org")
#   library(knitr) # knitr is used to render this R code to a LaTeX file (includes kable)
# if(!require(stargazer)) install.packages("stargazer", repos = "http://cran.us.r-project.org")
#   library(stargazer) # knitr is used to render this R code to a LaTeX file (includes kable)
```

### <span style="color:forestgreen"> --- Principles of Economics --- </span>

#### <span style="color:forestgreen"> --- Chapter 14 - Poverty and Economic Inequality --- </span>

Last week we learned about economic growth for a country, this week, we look at how growth both improves a country through lowering poverty, but also hurts a country by raising inequality

## <span style="color:forestgreen"> --- The Definition of Poverty  --- </span>

Poverty levels were defined by the work of Mollie Orshansky in 1963 in her "Children of the Poor" article. Her work defined a family as living in poverty if a family could not provide themselves with a nutritionally adequate diet with one-third of their income.

## <span style="color:forestgreen"> --- Poverty in America --- </span>

We see the amount of people falling below the poverty line in America has changed over time.

```{r, echo = FALSE, fig.height = 5, fig.fullwidth=TRUE}
poverty <- read.csv("Input/Lab3-data.csv")

ggplot(poverty, aes(x = Year)) +
  geom_line(aes(y = Poverty/1000), colour = "navy") +
  ylab("Numer of People (in Millions)") +
  xlab("Year") +
  ggtitle("Number of People (in millions) in America in Poverty") + 
  ylim(20, 50) +
  theme(plot.title = element_text(hjust = 0.5))
```

---

```{r, echo = FALSE, fig.height = 5, fig.fullwidth=TRUE}
ggplot(poverty, aes(x = Year)) +
  geom_line(aes(y = Percent), colour = "navy") +
  ylab("Percent in Poverty") +
  xlab("Year") +
  ggtitle("Percent of People in America in Poverty") + 
  # ylim(20, 50) +
  theme(plot.title = element_text(hjust = 0.5))
```

## <span style="color:forestgreen"> --- Poverty in low-income countries --- </span>

The measure of poverty is different in low-income countries, due to a lower cost of living. In some places a  person living on less than \$1.25 per day is defined as living in poverty, others less than \$2 dollars per day

## <span style="color:forestgreen"> --- The Poverty Trap  --- </span>

Government Assistance programs such as Food Stamps, Medicaid, and Earned Income Tax Credit, were created to help people living in poverty. However a poverty trap is created in that some persons may become reliant on these and not improve their labour productivity so they can get out of poverty

## <span style="color:forestgreen"> --- An example  --- </span>

Suppose a person earns a minimum wage of \$8.00 per hour, and government assistance programs provide \$18,000 support per year. Then Table 3 (from the textbook) demonstrates this individual would have to work 500 hours to make themselves better off

---

I.e. say a person works 1,000 hours, then they earn \$8,000 dollars, and receive \$10,000 in government support (assuming the government support is one-to-one with income), then by the end of their their total income is \$18,000, which is no different than if they had not worked at all and recieved \$18,000 entirely from government support

---

```{r, echo = FALSE}
Table3 <- data.frame("Hours.Worked" = seq(0,2500,500),
                     "Total.Earnings" = seq(0,20000,4000),
                     "Government.Support" = c(18000,14000,10000,6000,2000,0),
                     "Support.Total.Income" = c(18000,18000,18000,18000,18000,20000))
kable(Table3, caption = "Table 3: Total Income at Various Combinations of Work and Support")
```

---

If however we cut in half the government support by half, to reward hard work, the table becomes:

```{r, echo = FALSE}
Table4 <- data.frame("Hours.Worked" = seq(0,2500,500),
                     "Total.Earnings" = seq(0,20000,4000),
                     "Government.Support" = c(18000,16000,14000,12000,10000,8000),
                     "Support.Total.Income" = c(18000,20000,22000,24000,26000,28000))
kable(Table4, caption = "Table 4: The Labor-Leisure Tradeoff with Assistance Reduced by 50 Cents for Every Dollar Earned")
```

---

Where now if the person works 1,000 hours they are made better off with an income of \$22,000

## <span style="color:orchid"> +++ Laboratory assignment A +++ </span>

Lily earns \$12.00 an hour, and a government antipoverty program provides a floor of \$12,000 guaranteed income. The government reduces government support by \$0.50 for each \$1.00 earned. Assume the maximum hours for work or leisure is 2,500 hours per year.

1. How much does Lily earn if she works 0 hours?

2. How much does Lily earn if she works 1000 hours?

3. What is Lily's maximum income?

## <span style="color:forestgreen"> --- Income Inequality  --- </span>

While Economic growth measures the aggregate value of a country, the share of wealth distributed to its citizens is not necessarily equally shared. When the rich get richer and the poor stay poor we call this Inequality.

## <span style="color:forestgreen"> --- Defining Inequality  --- </span>

We define inequality as occuring when the share of wealth to the top and bottom quantiles of income earners widens.

A quantile separates a distribution into 5 parts, so for example in a population of 200 people, the first quantile is the bottom 20% or the 40 (200*.2) people with the lowest income. Whereas the top 20% are the 40 people with the highest incomes.

## <span style="color:forestgreen"> --- Shares of Incomes  --- </span>

Table 8 in the text displays shares of incomes in 1980 and 2013

```{r, echo = FALSE}
Table8 <- data.frame(Quantile = c(0.2, 0.4, 0.6, 0.8, 1), 
                     Share.1980 = c(4.2, 10.2, 16.8, 24.7, 44.1),
                     Cumulative.Share.1980 = c(4.2, 14.4, 31.2, 55.9, 100),
                     Share.2013 = c(3.2, 8.4, 14.4, 23, 51),
                     Year.2013 = c(3.2, 11.6, 26.0, 49, 100))
kable(Table8, caption = "Table 8: Calculating the Lorenz Curve")
```

## <span style="color:forestgreen"> --- The Lorenz Curve  --- </span>

If we add by row the shares of incomes for the quantiles starting with the first, and plot the resulting Cumulative Shares, we get a plot called the Lorenz Curve. 

```{r, echo = FALSE, fig.height = 5, fig.fullwidth=TRUE}
Table8.2 <- data.frame(Q = c(0, 0.2, 0.4, 0.6, 0.8, 1), 
                     Year.1980 = c(0, 4.2, 14.4, 31.2, 55.9, 100),
                     Year.2013 = c(0, 3.2, 11.6, 26.0, 49, 100),
                     Perfect.Equality = c(0, 20, 40, 60, 80, 100))

Table8.melt <- melt(Table8.2, id.vars = "Q",
                    measure.vars = c("Year.1980", "Year.2013", "Perfect.Equality"), 
                    variable.name = "Years",
                    value.name = "Income")
     
Figure1 <- ggplot(Table8.melt, aes(x = Q, y = Income, color = Years)) + 
  geom_line() +
  ylab("Cumulative Share of Income (in Percent)") +
  xlab("Income Quantiles") +
  ggtitle("Lorenz Curves From 1980 and 2013") +
  theme(plot.title = element_text(hjust = 0.5))

Figure1
```

---

We see in 2013 the line became deeper and further away from a perfectly straight line, this means inequality has increased

Why? 

The perfectly straight line says that the lowest 20\% of income earners gained 20\% of wealth in the economy, 40\% gained their 20\% share, etc. Which would be perfect share of wealth

So a move away from this line indicates some groups (almost always the top 20\% group) gained wealth in relation to the others

## <span style="color:orchid"> +++ Laboratory assignment B +++ </span>

1. Create a data frame that reproduces Table 8

2. A group of 10 people have the following annual incomes: \$24,000, \$18,000, \$50,000, \$100,000, \$12,000, \$36,000, \$80,000, \$10,000, \$24,000, \$16,000. Create a data frame of this data and calculate the share of total income received by each quintile of this income distribution. Do the top and bottom quintiles in this distribution have a greater or larger share of total income than the top and bottom quintiles of the U.S. income distribution?

3. What are some reasons why a certain degree of inequality of income would be expected in a market economy?

## <span style="color:deepskyblue"> --- Let's changing directories  --- </span>

### <span style="color:deepskyblue"> --- Reproducible Research with R  --- </span>

#### <span style="color:deepskyblue"> --- Chapter 4 - Getting Started with File Management  --- </span>

As our laboratory assignments are hosted on GitHub, this Laboratory assignment should be hosted under the file path: "/GitHub/ECON1??/Laboratory/Laboratory_3.Rmd"

Let's check this using the $getwd(.)$ R function

```{r}
getwd()
```

## <span style="color:deepskyblue"> --- Let's changing directories  --- </span>

Changing directories can be done in several ways 

- Using $setwd(.)$ R function
- Using the File navigator window
- Alternative functions (not covered)

## <span style="color:deepskyblue"> --- Using $setwd(.)$  --- </span>


```{r}
# Move to the Input folder (note the wd stays for only this code chunk, to set globally, set in the first code chunk with the setup option)
setwd("Input")
getwd()
```

## <span style="color:deepskyblue"> --- UNIX commands in Git  --- </span>

The R commands $getwd(.)$ and $setwd(.)$ are functions that can only be used in an R environment. We may want to navigate GitHub in Terminal (Mac) or GitBash (Windows). To do so we may change workding directories using UNIX commands, this are functions any UNIX operating system uses and are quite general. I.e. if you use a Linux or Mac's Terminal you have needed to use these commands

## <span style="color:deepskyblue"> --- Learning Git in GitHub  --- </span>

Git is the coding language used for distributed file sharing. GitHub is one place (and the most popular by far) that hosts files to be shared

Include Video provided by Lars

## <span style="color:orchid"> +++ Laboratory assignment C +++ </span>

1. Post your .Rmd file that answers the questions in the Laboratory assignment onto our GitHub Classrooms page
